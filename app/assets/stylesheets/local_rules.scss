/*
   Include all CSS rules for UW's Sufia here.

   This is an SCSS file, so you can use any defined variables and mixins.
*/

@import 'local_sass_variables';

a[href="#"] {
   color: $uw-orange !important;
}

#content-wrapper .draft {
   position: relative;
}
#content-wrapper .draft:before {
   content: "";
   position: absolute;
   top: 0;
   bottom: 0;
   left: 0;
   right: 0;
   border: 3px dashed rgba($uw-red, 0.2);
   z-index: -1;
}
#content-wrapper .draft:after {
   content: "DRAFT";
   position: absolute;
   box-sizing: border-box;
   top: 8px;
   right: 8px;
   width: auto;
   font-size: 5rem;
   color: $uw-red;
   pointer-events: none;
   opacity: 0.2;
   display: inline-block;
   line-height: 80%;
   z-index: -1;
}
#content-wrapper a[href="null"]:after {
   content: "[link needed]";
   font-style: normal;
   font-size: 0.75em;
   vertical-align: super;
}

/* --------------------- */
/* ---- GENERAL CSS ---- */
/* --------------------- */

/* LINKS*/
a:hover,
a:focus {
   color: $uw-purple;
}
/* links in main section of pages get bold */
main a {
  font-weight: bold;
  color: $uw-blue;
}
main a:focus {
  outline: dotted 1px;
  outline-offset: 2px;
}
/* external links */
a.external:after {
   content: "\e164";
   font-family: 'Glyphicons Halflings';
   font-style: normal;
   font-weight: normal;
   font-size: 1rem;
   -webkit-font-smoothing: antialiased;
   -moz-osx-font-smoothing: grayscale;
   display: inline-table;
   position: relative;
   top: -2px;
}

/* make inputs have black text (not gray) */
.form-control {
   color: #000;
}

/* CSS equivalent of LaTeX's \hfill for use in flex */
.flex_hfill {
   flex: 1 0 auto;
}

/* turn off some browser styling on abbr as bootstrap handles it*/
abbr {
   text-decoration: none !important;
   border-bottom: 2px dotted $uw-purple !important;
}


/* --------------------------- */
/* ---- Bootstrap Buttons ---- */
/* --------------------------- */
.btn {
   @extend %local-button-padding;
}
.btn-primary:hover, 
.btn-primary:focus, 
.btn-primary:active, 
.btn-primary.active, 
.btn-primary:active:focus {
    @extend %local-button-hover-focus;
}

/* ------------------------ */
/* ---- DROPDOWN MENUS ---- */
/* ------------------------ */
.dropdown-menu {
   background-color: $uw-light-grey;
}
.dropdown-menu > li {
   padding: 0.125em 0;
}
.dropdown-menu > li > a,
.dropdown-menu > li > button {
   color: #000;
   background-color: inherit;
   position: relative;
   padding: 0.2em 1.25em;
   border-radius: 0;
   width: 100%;
   text-align: left;
}
.dropdown-menu > li > a:hover,
.dropdown-menu > li > a:focus,
.dropdown-menu > li > button:hover,
.dropdown-menu > li > button:focus {
   @extend %local-button-hover-focus;
   outline: none;
}
/* we have customized to use a glyphicon chevron for the carat */
button.dropdown-toggle[aria-expanded="true"] span.fa.fa-chevron-down {
   display: none !important;
}
button.dropdown-toggle[aria-expanded="false"] span.fa.fa-chevron-up {
   display: none !important;
}
/* divider in dropdown menu */
.dropdown-menu .divider {
   background-color: $uw-medium-grey;
   margin: 0;
   padding: 0;
}
/* when the dropdown is open, the button looks inset */
#user_menu.open > button.dropdown-toggle,
#main_navigation button.navbar-toggle[aria-expanded=true], 
#about_menu.open > button.dropdown-toggle,
#deposit_menu.open > button.dropdown-toggle {
   box-shadow: inset 2px 3px 5px #000, inset 0px 1px 1px #000;
   padding-top: calc(#{$button-tb-padding} + 2px);
   padding-bottom: calc(#{$button-tb-padding} - 2px);
}
/* adjust glyphicons in user_menu */
#user_menu > button.dropdown-toggle .glyphicon {
   top: 2px;
}

/* ------------------------ */
/* ---- Page Structure ---- */
/* ------------------------ */

/* make the footer sticky */
html {
   height: 100%;
}
body {
   height: 100vh;
   display: flex;
   flex-direction: column;
   margin-bottom: 0; /* unsets Sufia's attempt to make a sticky footer */
}
main#content {
   flex: 1 0 auto;
}
footer#page-footer {
   flex-shrink: 0;
}


/* -------------------- */
/* ---- Skip Links ---- */
/* -------------------- */
a.skip-link {
    position: fixed;
    top: 0.5em;
    left: -12em;
    display: inline-block;
    color: transparent;
    background: transparent;
    -webkit-transition: left .5s ease-out, background .25s linear;
            transition: left .5s ease-out, background .25s linear;
    overflow: hidden;
    pointer-events: none;
    transform: translate3d(0,0,0);
    font-weight: bold;
    z-index: 5000;
    border-radius: 0px $border-radius-base $border-radius-base 0px;
    padding: 0.5em 0.75em;
    text-decoration: none;
}

a.skip-link:focus {
    pointer-events: auto;
    margin: 0;
    position: fixed;
    background: $uw-yellow;
    color: #000;
    outline:0;
    left: 0;
    -webkit-transition: left .5s ease-in, background .25s linear;
            transition: left .5s ease-in, background .25s linear;
}
a.skip-link:hover {
    text-decoration: underline;
}

/* ------------------------- */
/* ---- HEADER / BANNER ---- */
/* ------------------------- */
header[role=banner] {
   display: block;
   background-color: $uw-purple;
   position: relative;
}
header[role=banner] div.flex_row {
   display: flex;
   flex-direction: row;
   flex-wrap: nowrap;
   justify-content: center;
   align-content: center;
   align-items: center;
   padding-left: 15px;
   padding-right: 15px;
}

/* ----------------------- */
/* ---- HEADER: LOGOS ---- */
/* ----------------------- */
#header_logo_container {
   position: static;
   flex: 0 0 auto;
   width: 210px; /* uwlib_logo left + width */
   height: 45px;
}
.uw_logo {
   background-color: $uw-purple;
   background-image: image-url("uw_patch.png");
   background-repeat: no-repeat; 
   background-position: 0 0;
   background-size: 100% 100%;
   display: block;
   height: 45px;
   position: absolute;
   top: 0;
   width: 65px;
   overflow: hidden;
   color: transparent !important;
}
.uwlib_logo {
   background-color: $uw-purple;
   background-image: image-url("uwlib_wordmark.png");
   background-repeat: no-repeat;
   background-position: 0 0;
   background-size: 100% 100%;
   display: block;
   position: absolute;
   top: 0;
   left: 80px; /* 15px space between logos */
   height: 45px;
   overflow: hidden;
   color: transparent !important;
   width: 130px;
}
@media(min-width:768px) { /* enlarge UW and Library logos when wider window */
   #header_logo_container {
      width: 325px; /* uwlib logo left + uwlib logo width */
      height: 65px;
   }
   .uw_logo {
      height:65px;
      width:95px
   }
   .uwlib_logo {
      height: 65px;
      width: 200px;
      left: 125px /* 30px space between the two logos */
   }
}
.uw_logo:focus,
.uwlib_logo:focus {
   outline: 1px dotted $uw-yellow;  
   outline-offset: -1px;
}

/* ------------------------------- */
/* ---- HEADER: NOTIFICATIONS ---- */
/* ------------------------------- */
#header_notifications_container {
   flex: 0 0 auto;
   margin-right: 0.75em;
}
#header_notifications_container a {
   border-color: transparent;
}
#header_notifications_container a:hover,
#header_notifications_container a:focus {
    @extend %local-button-hover-focus;
}
#header_notifications_container a:focus {
   outline: none;
}
#header_notifications_container .label {
   background-color: transparent;
   font-size: inherit;
   font-weight: normal;
   top: 0;
   padding: 0 0 0 0.125em;
}
#header_notifications_container .label.invisible {
   visibility: visible;
}


/* --------------------------- */
/* ---- HEADER: USER MENU ---- */
/* --------------------------- */
#user_login_link,
#user_menu_button {
   border-color: transparent;
   font-weight: normal;
}
#user_login_link:hover,
#user_login_link:focus, 
#user_menu_button:hover,
#user_menu_button:focus {
    @extend %local-button-hover-focus;
}
#user_menu > ul {
   z-index: 20; /* so that the menu goes over the nav menu when it appears */
}

@media (max-width: 767px) {
   #user_menu_button .visible-xs-block {
      display: inline-block !important;
   }
}
